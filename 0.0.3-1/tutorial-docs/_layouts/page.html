<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="/css/style.css">
    <script type="application/javascript">
      const PATH = window.location.pathname.replace(/\/+$/, '');
      const THIS_VERSION = PATH.substring(PATH.lastIndexOf('/') + 1);
      fetch('../versions.json')
        .then(function(response) {
            if (response.status == 200) {
              response.json().then(function(versions) {
                var select = '<select onchange="if (this.value) window.location.href=this.value">';
                versions.forEach(function(v){
                    select += '<option value="../'+v.version+'"';
                    if (v.version == THIS_VERSION) select += ' selected';
                    select += '>'+v.version;
                    if (v.latest) select += ' (â˜… Latest)';
                    select += '</option>'; 
                });
                select += '</select>';

                var nav = document.querySelector('#nav');
                nav.innerHTML = select;
              });
            } else {
              console.log('ERROR', response);
            }
          }
        ).catch(function(err) {
          console.log('Error', err);
        });
    </script>
  </head>
  <body>
    <nav id="nav"></nav>
    <h1>{{ page.title }}</h1>
    <section>
      {{ content }}
    </section>
    <footer></footer>
  </body>
</html>